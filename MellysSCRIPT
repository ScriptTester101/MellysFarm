--========================
-- SUPER LOW GRAPHICS MODE (Safe Version)
--========================
local Lighting = game:GetService("Lighting")
local Terrain = workspace.Terrain

local SuperLowEnabled = false
local OriginalSettings = {}

local SuperLowButton = Instance.new("TextButton", FPSSection)
SuperLowButton.Size = UDim2.new(1,0,0,36)
SuperLowButton.Text = "Enable SUPER Low Graphics"
SuperLowButton.Font = Enum.Font.GothamMedium
SuperLowButton.TextSize = 14
SuperLowButton.TextColor3 = Color3.fromRGB(235,235,235)
SuperLowButton.BackgroundColor3 = Color3.fromRGB(120,60,60)
Instance.new("UICorner", SuperLowButton)

-- Save originals once
local function SaveOriginals()
	if next(OriginalSettings) then return end
	OriginalSettings.GlobalShadows = Lighting.GlobalShadows
	OriginalSettings.Technology = Lighting.Technology
	OriginalSettings.Brightness = Lighting.Brightness
	OriginalSettings.EnvironmentDiffuseScale = Lighting.EnvironmentDiffuseScale
	OriginalSettings.EnvironmentSpecularScale = Lighting.EnvironmentSpecularScale
	OriginalSettings.WaterTransparency = Terrain.WaterTransparency
	OriginalSettings.WaterWaveSize = Terrain.WaterWaveSize
	OriginalSettings.WaterWaveSpeed = Terrain.WaterWaveSpeed
end

SuperLowButton.MouseButton1Click:Connect(function()
	SuperLowEnabled = not SuperLowEnabled
	SaveOriginals()

	if SuperLowEnabled then
		-- Lighting nuked
		Lighting.GlobalShadows = false
		Lighting.Technology = Enum.Technology.Compatibility
		Lighting.Brightness = 0.5
		Lighting.EnvironmentDiffuseScale = 0
		Lighting.EnvironmentSpecularScale = 0

		-- Disable post-processing
		for _,v in ipairs(Lighting:GetChildren()) do
			if v:IsA("BloomEffect")
			or v:IsA("DepthOfFieldEffect")
			or v:IsA("SunRaysEffect")
			or v:IsA("ColorCorrectionEffect")
			or v:IsA("Atmosphere") then
				v.Enabled = false
			end
		end

		-- Disable particles & effects
		for _,v in ipairs(workspace:GetDescendants()) do
			if v:IsA("ParticleEmitter")
			or v:IsA("Trail")
			or v:IsA("Beam")
			or v:IsA("Smoke")
			or v:IsA("Fire")
			or v:IsA("Sparkles") then
				v.Enabled = false
			end
			-- Flatten materials
			if v:IsA("BasePart") then
				v.Material = Enum.Material.Plastic
				v.Reflectance = 0
			end
		end

		-- Water
		Terrain.WaterTransparency = 1
		Terrain.WaterWaveSize = 0
		Terrain.WaterWaveSpeed = 0
		Terrain.WaterReflectance = 0

		SuperLowButton.Text = "Disable SUPER Low Graphics"
	else
		-- Restore lighting
		Lighting.GlobalShadows = OriginalSettings.GlobalShadows
		Lighting.Technology = OriginalSettings.Technology
		Lighting.Brightness = OriginalSettings.Brightness
		Lighting.EnvironmentDiffuseScale = OriginalSettings.EnvironmentDiffuseScale
		Lighting.EnvironmentSpecularScale = OriginalSettings.EnvironmentSpecularScale

		-- Restore post-processing
		for _,v in ipairs(Lighting:GetChildren()) do
			if v:IsA("BloomEffect")
			or v:IsA("DepthOfFieldEffect")
			or v:IsA("SunRaysEffect")
			or v:IsA("ColorCorrectionEffect")
			or v:IsA("Atmosphere") then
				v.Enabled = true
			end
		end

		-- Restore particles & effects
		for _,v in ipairs(workspace:GetDescendants()) do
			if v:IsA("ParticleEmitter")
			or v:IsA("Trail")
			or v:IsA("Beam")
			or v:IsA("Smoke")
			or v:IsA("Fire")
			or v:IsA("Sparkles") then
				v.Enabled = true
			end
		end

		-- Restore water
		Terrain.WaterTransparency = OriginalSettings.WaterTransparency
		Terrain.WaterWaveSize = OriginalSettings.WaterWaveSize
		Terrain.WaterWaveSpeed = OriginalSettings.WaterWaveSpeed

		SuperLowButton.Text = "Enable SUPER Low Graphics"
	end
end)
